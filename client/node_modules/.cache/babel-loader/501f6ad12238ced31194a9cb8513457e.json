{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Itay\\\\Desktop\\\\proj\\\\shopping\\\\client\\\\src\\\\admin\\\\components\\\\ProductAdd.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useReducer, useCallback } from 'react'; // MUI\n\nimport { Box, Grid, Button, Alert } from '@mui/material'; // COMPONENTS\n\nimport Input from './Input';\nimport Selector from './Selector'; // CammelCase Helper\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst camelCase = str => {\n  return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();\n}; //REDUCER\n\n\nconst FORM_UPDATE = 'FORM_UPDATE';\n\nconst formReducer = (state, action) => {\n  if (action.type === FORM_UPDATE) {\n    let formState = state;\n    let id = action.id;\n    let value = action.value;\n\n    if (id.toString().includes('filter')) {\n      // the filter Type\n      let type = id.toString().replace('filter', ''); // remove existing filter of the same Type\n\n      let filters = formState['filters'].filter(item => item.filterType !== type); // add this new filter to the Filters Array\n\n      filters.push({\n        filterType: type,\n        filterVariant: value\n      }); // set to the formState\n\n      formState['filters'] = filters;\n      console.log(filters);\n    } else {\n      formState[id] = value;\n    }\n\n    switch (id) {\n      case 'productCost':\n      case 'productInventory':\n        if (!value || value === '') {\n          formState[id] = id === 'productInventory' ? 1 : 0;\n        }\n\n        break;\n\n      default:\n        break;\n    } // CHECK IF THE FROM IS VALID\n\n\n    let formIsValid = Object.keys(formState).reduce((prev, key) => {\n      let res;\n\n      if (key === 'productCost' || key === 'productInventory') {\n        res = formState[key] > 0;\n      } else {\n        res = formState[key] !== '';\n      }\n\n      return res && prev;\n    }, true);\n    return { ...formState,\n      formIsValid: formIsValid\n    };\n  }\n\n  return state;\n}; // COMPONENT\n\n\nconst ProductAdd = props => {\n  _s();\n\n  const {\n    filters,\n    onCreateProduct,\n    onEditProduct,\n    editedProduct,\n    alert\n  } = props; //REDUCER ACTION / UPDATE\n\n  const [formState, dispatchFormState] = useReducer(formReducer, {\n    productName: editedProduct ? editedProduct.productName : '',\n    productDesc: editedProduct ? editedProduct.productDesc : '',\n    productCost: editedProduct ? editedProduct.productCost : 0,\n    productInventory: editedProduct ? editedProduct.productInventory : 1,\n    productStatus: editedProduct ? editedProduct.productStatus : 'active',\n    filters: editedProduct ? editedProduct.filters : [],\n    formIsValid: false\n  }); // ALERT \n\n  const [showAlert, setShowAlert] = useState(null);\n  useEffect(() => {\n    setShowAlert(alert);\n  }, [alert]); //UPADTE INPUTS\n\n  const onInputUpdate = useCallback((id, value) => {\n    dispatchFormState({\n      type: FORM_UPDATE,\n      id,\n      value,\n      editedProduct\n    });\n    setShowAlert(null);\n  }, [dispatchFormState, setShowAlert]); //INPUTS CALLBACK\n\n  const onInputChange = event => {\n    let id = event.target.id;\n    let value = event.target.value;\n    id && onInputUpdate(id, value);\n  }; // SUBMIT HANDLER\n\n\n  const onSubmitClicked = () => {\n    // if -> just in case...\n    // it is validated in the renderer scope\n    if (formState.formIsValid) {\n      let product = formState;\n      delete product.formIsValid; // parent callback\n\n      onCreateProduct && onCreateProduct(product);\n      onEditProduct && onEditProduct(product);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      flexGrow: 1,\n      padding: '50px 0'\n    },\n    display: 'flex',\n    justifyContent: 'center',\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      sx: {\n        width: 1 / 2\n      },\n      flexDirection: 'column',\n      justifyContent: 'flex-start',\n      alignItems: 'center',\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        sx: {\n          width: 2\n        },\n        children: \"Create new Product\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        sx: {\n          width: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          sx: {\n            width: 1\n          },\n          padding: 2,\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            inputType: 'text',\n            id: 'productName',\n            defaultValue: formState.productName,\n            label: \"Product Name\",\n            onChange: onInputChange,\n            required: true,\n            camelCased: true,\n            color: \"white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          sx: {\n            width: 1\n          },\n          padding: 2,\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            inputType: 'text',\n            id: 'productDesc',\n            defaultValue: formState.productDesc,\n            label: \"Product Description\",\n            onChange: onInputChange,\n            required: true,\n            camelCased: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          sx: {\n            width: 1\n          },\n          children: \"Product Filters\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this), filters.filterTypes.map((type, index) => {\n          var _formState$filters$fi;\n\n          const variants = filters.filterList.filter(item => item.type === type).map(item => item.variant);\n          return /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            sx: {\n              width: 2\n            },\n            padding: 4,\n            children: /*#__PURE__*/_jsxDEV(Selector, {\n              id: `filter${camelCase(type)}`,\n              selectors: variants,\n              defaultValue: (_formState$filters$fi = formState.filters.find(filter => filter.filterType === `${camelCase(type)}`)) === null || _formState$filters$fi === void 0 ? void 0 : _formState$filters$fi.filterVariant,\n              label: `${camelCase(type)}`,\n              onSelect: onInputChange,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 17\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 15\n          }, this);\n        }), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          sx: {\n            width: 1,\n            color: 'warning'\n          },\n          children: \"Product Inventory\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          sx: {\n            width: 1\n          },\n          padding: 2,\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            inputType: 'currency',\n            id: 'productCost',\n            defaultValue: formState.productCost,\n            label: \"Product Cost\",\n            onChange: onInputChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          sx: {\n            width: 1\n          },\n          padding: 2,\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            inputType: 'number',\n            id: 'productInventory',\n            defaultValue: formState.productInventory,\n            label: \"Product Inventory\",\n            defaultValue: '1',\n            onChange: onInputChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          sx: {\n            width: 2\n          },\n          padding: 4,\n          children: /*#__PURE__*/_jsxDEV(Selector, {\n            id: 'productStatus',\n            selectors: ['Inactive', 'Active'],\n            defaultIndex: 1,\n            label: 'Product Status',\n            onSelect: onInputChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          sx: {\n            width: 2\n          },\n          padding: 4,\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            sx: {\n              width: 2\n            },\n            variant: \"contained\",\n            color: \"success\",\n            onClick: onSubmitClicked,\n            disabled: !formState.formIsValid,\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this), showAlert && formState.formIsValid && /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        sx: {\n          width: 2\n        },\n        children: /*#__PURE__*/_jsxDEV(Alert, {\n          severity: showAlert.type,\n          color: showAlert.type,\n          children: showAlert.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ProductAdd, \"wkBqJxgds8lkXbWARmoYnfobejA=\");\n\n_c = ProductAdd;\nexport default ProductAdd;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductAdd\");","map":{"version":3,"sources":["C:/Users/Itay/Desktop/proj/shopping/client/src/admin/components/ProductAdd.js"],"names":["React","useState","useEffect","useReducer","useCallback","Box","Grid","Button","Alert","Input","Selector","camelCase","str","charAt","toUpperCase","slice","toLowerCase","FORM_UPDATE","formReducer","state","action","type","formState","id","value","toString","includes","replace","filters","filter","item","filterType","push","filterVariant","console","log","formIsValid","Object","keys","reduce","prev","key","res","ProductAdd","props","onCreateProduct","onEditProduct","editedProduct","alert","dispatchFormState","productName","productDesc","productCost","productInventory","productStatus","showAlert","setShowAlert","onInputUpdate","onInputChange","event","target","onSubmitClicked","product","flexGrow","padding","width","filterTypes","map","index","variants","filterList","variant","find","color","message"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useReducer, useCallback } from 'react';\r\n\r\n// MUI\r\nimport { Box, Grid, Button, Alert } from '@mui/material';\r\n\r\n// COMPONENTS\r\nimport Input from './Input';\r\nimport Selector from './Selector';\r\n\r\n// CammelCase Helper\r\nconst camelCase = (str) => {\r\n  return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();\r\n};\r\n\r\n//REDUCER\r\nconst FORM_UPDATE = 'FORM_UPDATE';\r\nconst formReducer = (state, action) => {\r\n  if (action.type === FORM_UPDATE) {\r\n    let formState = state;\r\n\r\n    let id = action.id;\r\n    let value = action.value;\r\n\r\n    if (id.toString().includes('filter')) {\r\n      // the filter Type\r\n      let type = id.toString().replace('filter', '');\r\n\r\n      // remove existing filter of the same Type\r\n      let filters = formState['filters'].filter(\r\n        (item) => item.filterType !== type\r\n      );\r\n\r\n      // add this new filter to the Filters Array\r\n      filters.push({\r\n        filterType: type,\r\n        filterVariant: value,\r\n      });\r\n\r\n      // set to the formState\r\n      formState['filters'] = filters;\r\n      console.log(filters);\r\n    } else {\r\n      formState[id] = value;\r\n    }\r\n\r\n    switch (id) {\r\n      case 'productCost':\r\n      case 'productInventory':\r\n        if (!value || value === '') {\r\n          formState[id] = id === 'productInventory' ? 1 : 0;\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    // CHECK IF THE FROM IS VALID\r\n    let formIsValid = Object.keys(formState).reduce((prev, key) => {\r\n      let res;\r\n      if (key === 'productCost' || key === 'productInventory') {\r\n        res = formState[key] > 0;\r\n      } else {\r\n        res = formState[key] !== '';\r\n      }\r\n\r\n      return res && prev;\r\n    }, true);\r\n\r\n    return {\r\n      ...formState,\r\n      formIsValid: formIsValid,\r\n    };\r\n  }\r\n\r\n  return state;\r\n};\r\n\r\n// COMPONENT\r\nconst ProductAdd = (props) => {\r\n  const { filters, onCreateProduct, onEditProduct, editedProduct, alert } =\r\n    props;\r\n\r\n  //REDUCER ACTION / UPDATE\r\n  const [formState, dispatchFormState] = useReducer(formReducer, {\r\n    productName: editedProduct ? editedProduct.productName : '',\r\n    productDesc: editedProduct ? editedProduct.productDesc : '',\r\n    productCost: editedProduct ? editedProduct.productCost : 0,\r\n    productInventory: editedProduct ? editedProduct.productInventory : 1,\r\n    productStatus: editedProduct ? editedProduct.productStatus : 'active',\r\n    filters: editedProduct ? editedProduct.filters : [],\r\n    formIsValid: false,\r\n  });\r\n\r\n  // ALERT \r\n  const [showAlert, setShowAlert] = useState(null);\r\n  useEffect(() => {\r\n    setShowAlert(alert);\r\n  }, [alert]);\r\n\r\n  //UPADTE INPUTS\r\n  const onInputUpdate = useCallback(\r\n    (id, value) => {\r\n      dispatchFormState({\r\n        type: FORM_UPDATE,\r\n        id,\r\n        value,\r\n        editedProduct,\r\n      });\r\n      setShowAlert(null);\r\n    },\r\n    [dispatchFormState, setShowAlert]\r\n  );\r\n\r\n  //INPUTS CALLBACK\r\n  const onInputChange = (event) => {\r\n    let id = event.target.id;\r\n    let value = event.target.value;\r\n\r\n    id && onInputUpdate(id, value);\r\n  };\r\n\r\n  // SUBMIT HANDLER\r\n  const onSubmitClicked = () => {\r\n    // if -> just in case...\r\n    // it is validated in the renderer scope\r\n    if (formState.formIsValid) {\r\n      let product = formState;\r\n      delete product.formIsValid;\r\n\r\n      // parent callback\r\n      onCreateProduct && onCreateProduct(product);\r\n      onEditProduct && onEditProduct(product);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box\r\n      sx={{ flexGrow: 1, padding: '50px 0' }}\r\n      display={'flex'}\r\n      justifyContent={'center'}\r\n    >\r\n      <Grid\r\n        container\r\n        sx={{ width: 1 / 2 }}\r\n        flexDirection={'column'}\r\n        justifyContent={'flex-start'}\r\n        alignItems={'center'}\r\n      >\r\n        <Grid item sx={{ width: 2 }}>\r\n          Create new Product\r\n        </Grid>\r\n        <Grid\r\n          item\r\n          display={'flex'}\r\n          flexDirection={'column'}\r\n          justifyContent={'space-between'}\r\n          alignItems={'center'}\r\n          sx={{ width: 1 }}\r\n        >\r\n          <Grid item sx={{ width: 1 }} padding={2}>\r\n            <Input\r\n              inputType={'text'}\r\n              id={'productName'}\r\n              defaultValue={formState.productName}\r\n              label=\"Product Name\"\r\n              onChange={onInputChange}\r\n              required\r\n              camelCased\r\n              color= 'white'\r\n            />\r\n          </Grid>\r\n          <Grid item sx={{ width: 1 }} padding={2}>\r\n            <Input\r\n              inputType={'text'}\r\n              id={'productDesc'}\r\n              defaultValue={formState.productDesc}\r\n              label=\"Product Description\"\r\n              onChange={onInputChange}\r\n              required\r\n              camelCased\r\n            />\r\n          </Grid>\r\n          <Grid item sx={{ width: 1 }}>\r\n            Product Filters\r\n          </Grid>\r\n          {filters.filterTypes.map((type, index) => {\r\n            const variants = filters.filterList\r\n              .filter((item) => item.type === type)\r\n              .map((item) => item.variant);\r\n\r\n            return (\r\n              <Grid key={index} item sx={{ width: 2 }} padding={4}>\r\n                <Selector\r\n                  id={`filter${camelCase(type)}`}\r\n                  selectors={variants}\r\n                  defaultValue={\r\n                    formState.filters.find(\r\n                      (filter) => filter.filterType === `${camelCase(type)}`\r\n                    )?.filterVariant\r\n                  }\r\n                  label={`${camelCase(type)}`}\r\n                  onSelect={onInputChange}\r\n                  required\r\n                />\r\n              </Grid>\r\n            );\r\n          })}\r\n          <Grid item sx={{ width: 1, color: 'warning' }}>\r\n            Product Inventory\r\n          </Grid>\r\n          <Grid item sx={{ width: 1 }} padding={2}>\r\n            <Input\r\n              inputType={'currency'}\r\n              id={'productCost'}\r\n              defaultValue={formState.productCost}\r\n              label=\"Product Cost\"\r\n              onChange={onInputChange}\r\n              required\r\n            />\r\n          </Grid>\r\n          <Grid item sx={{ width: 1 }} padding={2}>\r\n            <Input\r\n              inputType={'number'}\r\n              id={'productInventory'}\r\n              defaultValue={formState.productInventory}\r\n              label=\"Product Inventory\"\r\n              defaultValue={'1'}\r\n              onChange={onInputChange}\r\n              required\r\n            />\r\n          </Grid>\r\n          <Grid item sx={{ width: 2 }} padding={4}>\r\n            <Selector\r\n              id={'productStatus'}\r\n              selectors={['Inactive', 'Active']}\r\n              defaultIndex={1}\r\n              label={'Product Status'}\r\n              onSelect={onInputChange}\r\n              required\r\n            />\r\n          </Grid>\r\n          <Grid item sx={{ width: 2 }} padding={4}>\r\n            <Button\r\n              sx={{ width: 2 }}\r\n              variant=\"contained\"\r\n              color=\"success\"\r\n              onClick={onSubmitClicked}\r\n              disabled={!formState.formIsValid}\r\n            >\r\n              Submit\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n        {showAlert && formState.formIsValid && (\r\n          <Grid item sx={{ width: 2 }}>\r\n            <Alert severity={showAlert.type} color={showAlert.type}>\r\n              {showAlert.message}\r\n            </Alert>\r\n          </Grid>\r\n        )}\r\n      </Grid>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default ProductAdd;\r\n"]},"metadata":{},"sourceType":"module"}